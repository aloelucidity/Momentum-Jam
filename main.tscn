[gd_scene load_steps=10 format=3 uid="uid://cobk8lnewpxif"]

[ext_resource type="Script" uid="uid://dlwr37a2j3bdo" path="res://polygon_2d.gd" id="1_ig7tw"]
[ext_resource type="PackedScene" uid="uid://dqwlfcfa1tbol" path="res://character/character.tscn" id="2_1bvp3"]
[ext_resource type="Script" uid="uid://bxwwlyk64urqt" path="res://level/character_camera.gd" id="2_h2yge"]
[ext_resource type="AudioStream" uid="uid://msa1oks5siq5" path="res://music/bgm.mp3" id="4_1bvp3"]
[ext_resource type="Script" uid="uid://cimamf4iibvtd" path="res://line_2d.gd" id="4_lquwl"]
[ext_resource type="Script" uid="uid://bema7mhup8qn0" path="res://animation_player.gd" id="5_7mycd"]

[sub_resource type="Animation" id="Animation_272bh"]
resource_name = "animate"
length = 8.0
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 3.0499997, 4, 7),
"transitions": PackedFloat32Array(-2, 1, -2, 1),
"update": 0,
"values": [Vector2(2944, -32), Vector2(2814, 320), Vector2(2814, 320), Vector2(2944, -32)]
}

[sub_resource type="Animation" id="Animation_5vw27"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(2944, -32)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_kek77"]
_data = {
&"RESET": SubResource("Animation_5vw27"),
&"animate": SubResource("Animation_272bh")
}

[node name="Node2D" type="Node2D"]

[node name="Terrain" type="Node2D" parent="."]
z_index = 1

[node name="AnimatableBody2D" type="AnimatableBody2D" parent="Terrain"]
position = Vector2(2944, -32)

[node name="OneWay" type="CollisionPolygon2D" parent="Terrain/AnimatableBody2D"]
build_mode = 1
polygon = PackedVector2Array(-576, -192, -448, -192, -448, -160, -576, -160)
one_way_collision = true

[node name="Line2D" type="Line2D" parent="Terrain/AnimatableBody2D/OneWay" node_paths=PackedStringArray("collision_polygon")]
position = Vector2(0, 3)
width = 6.0
script = ExtResource("4_lquwl")
collision_polygon = NodePath("..")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Terrain/AnimatableBody2D"]
callback_mode_process = 0
libraries = {
&"": SubResource("AnimationLibrary_kek77")
}
script = ExtResource("5_7mycd")

[node name="Water" type="StaticBody2D" parent="Terrain"]
position = Vector2(9, -207)
collision_layer = 2
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Terrain/Water"]
polygon = PackedVector2Array(4023, 15, 2839, 79, 2839, 591, 4023, 591)

[node name="Polygon2D" type="Polygon2D" parent="Terrain/Water/CollisionPolygon2D" node_paths=PackedStringArray("collision_polygon")]
color = Color(0, 0.7529412, 1, 0.5019608)
script = ExtResource("1_ig7tw")
collision_polygon = NodePath("..")

[node name="Water2" type="StaticBody2D" parent="Terrain"]
position = Vector2(-4256, 128)
collision_layer = 2
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Terrain/Water2"]
polygon = PackedVector2Array(3840, 32, 2752, 32, 2752, 352, 3840, 352)

[node name="Polygon2D" type="Polygon2D" parent="Terrain/Water2/CollisionPolygon2D" node_paths=PackedStringArray("collision_polygon")]
color = Color(0, 0.7529412, 1, 0.5019608)
script = ExtResource("1_ig7tw")
collision_polygon = NodePath("..")

[node name="Terrain" type="StaticBody2D" parent="Terrain"]
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Terrain/Terrain"]
polygon = PackedVector2Array(-480, 96, -128, 96, 416, 192, 608, 96, 1216, 96, 1280, -32, 1568, 0, 1696, 128, 2432, 128, 2496, -224, 2912, -192, 2912, 256, 3904, 320, 3904, -416, 4640, -416, 4640, -1120, 5184, -1120, 5184, -2016, 5952, -2016, 5984, 1088, -2368, 1120, -2880, -2880, -1504, -2432, -1888, -1536, -1888, -544, -1408, -512, -1408, -192, -800, -192, -800, -32, -1088, -32, -1088, 224, -1280, 224, -1280, -32, -1440, -32, -1440, 384, -480, 384)

[node name="Polygon2D" type="Polygon2D" parent="Terrain/Terrain/CollisionPolygon2D" node_paths=PackedStringArray("collision_polygon")]
script = ExtResource("1_ig7tw")
collision_polygon = NodePath("..")

[node name="OneWay" type="CollisionPolygon2D" parent="Terrain/Terrain"]
build_mode = 1
polygon = PackedVector2Array(-800, -192, -256, -192, -256, -160, -800, -160)
one_way_collision = true

[node name="Line2D" type="Line2D" parent="Terrain/Terrain/OneWay" node_paths=PackedStringArray("collision_polygon")]
position = Vector2(0, 3)
width = 6.0
script = ExtResource("4_lquwl")
collision_polygon = NodePath("..")

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("camera_follow")]
process_callback = 0
script = ExtResource("2_h2yge")
camera_follow = NodePath("../Player")
camera_speed = 5.0
zoom_out_threshold = 350.0
zoom_out_damp = 1500.0
max_velocity_offset = Vector2(1000, 600)

[node name="Player" parent="." instance=ExtResource("2_1bvp3")]

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("4_1bvp3")
volume_db = -4.0
autoplay = true
bus = &"Music"
