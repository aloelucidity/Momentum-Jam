[gd_scene load_steps=18 format=3 uid="uid://47d5qr13mh7m"]

[ext_resource type="Script" uid="uid://m1absxshqc7e" path="res://level/objects/petal/petal.gd" id="1_ocx8v"]
[ext_resource type="Texture2D" uid="uid://wk8fryv4ja1" path="res://level/objects/petal/petal1.png" id="2_5oyd3"]
[ext_resource type="Texture2D" uid="uid://b6103vyymdej7" path="res://level/objects/petal/petal2.png" id="3_nqdlf"]
[ext_resource type="Texture2D" uid="uid://dxvsh8lumw4dq" path="res://level/objects/petal/petal3.png" id="4_ajr1j"]
[ext_resource type="Texture2D" uid="uid://c78w3m7a6nakk" path="res://level/objects/petal/petal4.png" id="5_tkjwy"]
[ext_resource type="Texture2D" uid="uid://cc247d1ndd46i" path="res://level/objects/petal/petal5.png" id="6_m1kgc"]
[ext_resource type="Texture2D" uid="uid://b4salrytdocpu" path="res://level/objects/petal/petal6.png" id="7_w2r8j"]
[ext_resource type="Shader" uid="uid://btuc7wsl22b2x" path="res://shaders/blur.gdshader" id="8_vnk2h"]
[ext_resource type="Shader" uid="uid://bj0q8wafpmjw5" path="res://shaders/clover.gdshader" id="10_23amy"]

[sub_resource type="Animation" id="Animation_euosq"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewport/Sprite:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("2_5oyd3")]
}

[sub_resource type="Animation" id="Animation_nqd1o"]
resource_name = "spin"
length = 0.6
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewport/Sprite:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("2_5oyd3"), ExtResource("3_nqdlf"), ExtResource("4_ajr1j"), ExtResource("5_tkjwy"), ExtResource("6_m1kgc"), ExtResource("7_w2r8j")]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_wwuja"]
_data = {
&"RESET": SubResource("Animation_euosq"),
&"spin": SubResource("Animation_nqd1o")
}

[sub_resource type="ViewportTexture" id="ViewportTexture_2orgk"]
viewport_path = NodePath("SubViewport")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_37uq6"]
shader = ExtResource("8_vnk2h")
shader_parameter/is_additive = true
shader_parameter/blur_radius = 5.0000002375
shader_parameter/sample_count = 7

[sub_resource type="CircleShape2D" id="CircleShape2D_r3g2v"]
radius = 48.0

[sub_resource type="CircleShape2D" id="CircleShape2D_4r5sp"]
radius = 12.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_5oyd3"]
shader = ExtResource("10_23amy")
shader_parameter/global_pos = Vector2(0, 0)
shader_parameter/influence = 0.40000000596048
shader_parameter/offset = 0.0
shader_parameter/effect_scale = 4.0
shader_parameter/effect_divide = 5.000000074506

[node name="Petal" type="Area2D"]
collision_layer = 0
collision_mask = 4
monitorable = false
script = ExtResource("1_ocx8v")
magnet_speed = 3.0

[node name="Spin" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_wwuja")
}

[node name="Viewport" type="Sprite2D" parent="."]
texture = SubResource("ViewportTexture_2orgk")

[node name="Glow" type="Sprite2D" parent="Viewport"]
modulate = Color(1.8247963, 1.8247963, 1.8247963, 0.5019608)
show_behind_parent = true
texture_filter = 2
material = SubResource("ShaderMaterial_37uq6")
texture = SubResource("ViewportTexture_2orgk")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_r3g2v")

[node name="Collect" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 4
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Collect"]
shape = SubResource("CircleShape2D_4r5sp")

[node name="SubViewport" type="SubViewport" parent="."]
transparent_bg = true
canvas_item_default_texture_filter = 0
oversampling = false
size = Vector2i(24, 24)

[node name="Sprite" type="Sprite2D" parent="SubViewport"]
material = SubResource("ShaderMaterial_5oyd3")
texture = ExtResource("2_5oyd3")
centered = false
offset = Vector2(4, 4)

[connection signal="body_entered" from="." to="." method="body_entered"]
[connection signal="body_exited" from="." to="." method="body_exited"]
[connection signal="body_entered" from="Collect" to="." method="collect_body_entered"]
