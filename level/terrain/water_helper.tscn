[gd_scene load_steps=14 format=3 uid="uid://c7kbs53vkl1tx"]

[ext_resource type="Script" uid="uid://l75y4ft1rmfi" path="res://level/terrain/water_helper.gd" id="1_y8f4m"]
[ext_resource type="Script" uid="uid://ducdj30l5rqc3" path="res://level/terrain/water_notifier.gd" id="2_g8tyx"]
[ext_resource type="Shader" uid="uid://bdvbq76h2gfa0" path="res://shaders/wavy.gdshader" id="3_i2dh1"]

[sub_resource type="Gradient" id="Gradient_d0ajy"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_jcpdl"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_kvvhj"]
noise = SubResource("FastNoiseLite_jcpdl")
color_ramp = SubResource("Gradient_d0ajy")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1idy2"]
shader = ExtResource("3_i2dh1")
shader_parameter/refraction_map = SubResource("NoiseTexture2D_kvvhj")
shader_parameter/refraction_stretch = Vector2(1, 1)
shader_parameter/refraction_strength = 0.0050000002375
shader_parameter/water_tint = Color(0, 0.20000005, 1, 0.15686275)
shader_parameter/speed = 0.1

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_kvvhj"]
blend_mode = 1

[sub_resource type="Gradient" id="Gradient_jcpdl"]
colors = PackedColorArray(0.53, 0.6788334, 1, 0.1254902, 0, 0, 0, 0)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_kvvhj"]
frequency = 0.001
fractal_type = 2
domain_warp_type = 1
domain_warp_frequency = 0.1

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_1idy2"]
width = 128
height = 128
noise = SubResource("FastNoiseLite_kvvhj")
color_ramp = SubResource("Gradient_jcpdl")
seamless = true
seamless_blend_skirt = 1.0

[sub_resource type="Gradient" id="Gradient_kvvhj"]
offsets = PackedFloat32Array(0, 0.8, 0.9, 1)
colors = PackedColorArray(0.694, 0.45999998, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0.2509804, 1, 1, 1, 0)
metadata/_snap_enabled = true
metadata/_snap_count = 20

[sub_resource type="GradientTexture2D" id="GradientTexture2D_1idy2"]
gradient = SubResource("Gradient_kvvhj")
fill_from = Vector2(0.5, 0)
fill_to = Vector2(0.5, 1)
metadata/_snap_enabled = true

[node name="Water" type="Area2D"]
collision_layer = 2
collision_mask = 4
script = ExtResource("1_y8f4m")
resolution = 32
smoothness = 1
tension = 25.0
wave_damp = 3.0
wave_spread = 100.0
velocity_divide = 0.5
idle_amplitude = 2.0
idle_period_1 = 19.0
idle_period_2 = 7.0
idle_speed = 2.0

[node name="Collision" type="CollisionPolygon2D" parent="."]
self_modulate = Color(1, 1, 1, 0)
polygon = PackedVector2Array(8337, 32, 8304.804, 32, 8272.608, 32, 8240.412, 32, 8208.216, 32, 8176.0205, 32, 8143.824, 32, 8111.6284, 32, 8079.4326, 32, 8047.2363, 32, 8015.0405, 32, 7982.8447, 32, 7950.6484, 32, 7918.4526, 32, 7886.257, 32, 7854.061, 32, 7821.8647, 32, 7789.669, 32, 7757.473, 32, 7725.277, 32, 7693.081, 32, 7660.8853, 32, 7628.6895, 32, 7596.493, 32, 7564.2974, 32, 7532.1016, 32, 7499.9053, 32, 7467.7095, 32, 7435.5137, 32, 7403.3174, 32, 7371.1216, 32, 7338.926, 32, 7306.7295, 32, 7274.5337, 32, 7242.338, 32, 7210.142, 32, 7177.946, 32, 7145.75, 32, 7113.554, 32, 7081.3584, 32, 7049.162, 32, 7016.9663, 32, 6984.7705, 32, 6952.574, 32, 6920.3784, 32, 6888.1826, 32, 6855.9863, 32, 6823.7905, 32, 6791.5947, 32, 6759.3984, 32, 6727.2026, 32, 6695.007, 32, 6662.8105, 32, 6630.6147, 32, 6598.419, 32, 6566.223, 32, 6534.027, 32, 6501.831, 32, 6469.6353, 32, 6437.4395, 32, 6405.243, 32, 6373.0474, 32, 6340.8516, 32, 6308.6553, 32, 6276.4595, 32, 6244.2637, 32, 6212.0674, 32, 6179.8716, 32, 6147.676, 32, 6115.4795, 32, 6083.284, 32, 6051.088, 32, 6018.8916, 32, 5986.6963, 32, 5954.5, 32, 5922.3037, 32, 5890.1084, 32, 5857.912, 32, 5825.7163, 32, 5793.5205, 32, 5761.324, 32, 5729.1284, 32, 5696.9326, 32, 5664.7363, 32, 5632.5405, 32, 5600.3447, 32, 5568.1484, 32, 5535.953, 32, 5503.757, 32, 5471.5605, 32, 5439.365, 32, 5407.169, 32, 5374.973, 32, 5342.777, 32, 5310.581, 32, 5278.385, 32, 5246.1895, 32, 5213.993, 32, 5181.797, 32, 5149.6016, 32, 5117.4053, 32, 5085.2095, 32, 5053.0137, 32, 5020.8174, 32, 4988.6216, 32, 4956.426, 32, 4924.2295, 32, 4892.0337, 32, 4859.838, 32, 4827.6416, 32, 4795.4463, 32, 4763.25, 32, 4731.0537, 32, 4698.8584, 32, 4666.662, 32, 4634.4663, 32, 4602.2705, 32, 4570.074, 32, 4537.8784, 32, 4505.6826, 32, 4473.4863, 32, 4441.2905, 32, 4409.0947, 32, 4376.8984, 32, 4344.703, 32, 4312.507, 32, 4280.3105, 32, 4248.115, 32, 4215.919, 32, 4183.723, 32, 4151.527, 32, 4119.331, 32, 4087.1353, 32, 4054.9395, 32, 4022.7432, 32, 3990.5474, 32, 3958.3516, 32, 3926.1553, 32, 3893.9595, 32, 3861.7637, 32, 3829.5679, 32, 3797.3716, 32, 3765.1758, 32, 3732.98, 32, 3700.7837, 32, 3668.588, 32, 3636.392, 32, 3604.1963, 32, 3572, 32, 3539.4, 32, 3506.8, 32, 3474.2, 32, 3441.6, 32, 3409, 32, 3376.4, 32, 3343.8, 32, 3311.2, 32, 3278.6, 32, 3246, 32, 3213.4, 32, 3180.8, 32, 3148.2, 32, 3115.6, 32, 3083, 32, 3050.4, 32, 3017.8, 32, 2985.2, 32, 2952.6, 32, 2920, 32, 2887.4, 32, 2854.8, 32, 2822.2, 32, 2789.6, 32, 2757, 32, 2724.4, 32, 2691.8, 32, 2659.2, 32, 2626.6, 32, 2594, 32, 2561.4, 32, 2528.8, 32, 2496.2, 32, 2463.6, 32, 2431, 32, 2405, 744, 8337, 733)
script = ExtResource("2_g8tyx")

[node name="BackBufferCopy" type="BackBufferCopy" parent="."]
copy_mode = 2
metadata/_edit_lock_ = true

[node name="Inner" type="Polygon2D" parent="."]
material = SubResource("ShaderMaterial_1idy2")
color = Color(0, 0.7529412, 1, 0.5019608)
polygon = PackedVector2Array(8337, 32, 8304.804, 32, 8272.608, 32, 8240.412, 32, 8208.216, 32, 8176.0205, 32, 8143.824, 32, 8111.6284, 32, 8079.4326, 32, 8047.2363, 32, 8015.0405, 32, 7982.8447, 32, 7950.6484, 32, 7918.4526, 32, 7886.257, 32, 7854.061, 32, 7821.8647, 32, 7789.669, 32, 7757.473, 32, 7725.277, 32, 7693.081, 32, 7660.8853, 32, 7628.6895, 32, 7596.493, 32, 7564.2974, 32, 7532.1016, 32, 7499.9053, 32, 7467.7095, 32, 7435.5137, 32, 7403.3174, 32, 7371.1216, 32, 7338.926, 32, 7306.7295, 32, 7274.5337, 32, 7242.338, 32, 7210.142, 32, 7177.946, 32, 7145.75, 32, 7113.554, 32, 7081.3584, 32, 7049.162, 32, 7016.9663, 32, 6984.7705, 32, 6952.574, 32, 6920.3784, 32, 6888.1826, 32, 6855.9863, 32, 6823.7905, 32, 6791.5947, 32, 6759.3984, 32, 6727.2026, 32, 6695.007, 32, 6662.8105, 32, 6630.6147, 32, 6598.419, 32, 6566.223, 32, 6534.027, 32, 6501.831, 32, 6469.6353, 32, 6437.4395, 32, 6405.243, 32, 6373.0474, 32, 6340.8516, 32, 6308.6553, 32, 6276.4595, 32, 6244.2637, 32, 6212.0674, 32, 6179.8716, 32, 6147.676, 32, 6115.4795, 32, 6083.284, 32, 6051.088, 32, 6018.8916, 32, 5986.6963, 32, 5954.5, 32, 5922.3037, 32, 5890.1084, 32, 5857.912, 32, 5825.7163, 32, 5793.5205, 32, 5761.324, 32, 5729.1284, 32, 5696.9326, 32, 5664.7363, 32, 5632.5405, 32, 5600.3447, 32, 5568.1484, 32, 5535.953, 32, 5503.757, 32, 5471.5605, 32, 5439.365, 32, 5407.169, 32, 5374.973, 32, 5342.777, 32, 5310.581, 32, 5278.385, 32, 5246.1895, 32, 5213.993, 32, 5181.797, 32, 5149.6016, 32, 5117.4053, 32, 5085.2095, 32, 5053.0137, 32, 5020.8174, 32, 4988.6216, 32, 4956.426, 32, 4924.2295, 32, 4892.0337, 32, 4859.838, 32, 4827.6416, 32, 4795.4463, 32, 4763.25, 32, 4731.0537, 32, 4698.8584, 32, 4666.662, 32, 4634.4663, 32, 4602.2705, 32, 4570.074, 32, 4537.8784, 32, 4505.6826, 32, 4473.4863, 32, 4441.2905, 32, 4409.0947, 32, 4376.8984, 32, 4344.703, 32, 4312.507, 32, 4280.3105, 32, 4248.115, 32, 4215.919, 32, 4183.723, 32, 4151.527, 32, 4119.331, 32, 4087.1353, 32, 4054.9395, 32, 4022.7432, 32, 3990.5474, 32, 3958.3516, 32, 3926.1553, 32, 3893.9595, 32, 3861.7637, 32, 3829.5679, 32, 3797.3716, 32, 3765.1758, 32, 3732.98, 32, 3700.7837, 32, 3668.588, 32, 3636.392, 32, 3604.1963, 32, 3572, 32, 3539.4, 32, 3506.8, 32, 3474.2, 32, 3441.6, 32, 3409, 32, 3376.4, 32, 3343.8, 32, 3311.2, 32, 3278.6, 32, 3246, 32, 3213.4, 32, 3180.8, 32, 3148.2, 32, 3115.6, 32, 3083, 32, 3050.4, 32, 3017.8, 32, 2985.2, 32, 2952.6, 32, 2920, 32, 2887.4, 32, 2854.8, 32, 2822.2, 32, 2789.6, 32, 2757, 32, 2724.4, 32, 2691.8, 32, 2659.2, 32, 2626.6, 32, 2594, 32, 2561.4, 32, 2528.8, 32, 2496.2, 32, 2463.6, 32, 2431, 32, 2405, 744, 8337, 733)
metadata/_edit_lock_ = true

[node name="Overlay" type="Polygon2D" parent="."]
texture_filter = 2
texture_repeat = 2
material = SubResource("CanvasItemMaterial_kvvhj")
texture = SubResource("NoiseTexture2D_1idy2")
polygon = PackedVector2Array(8337, 32, 8304.804, 32, 8272.608, 32, 8240.412, 32, 8208.216, 32, 8176.0205, 32, 8143.824, 32, 8111.6284, 32, 8079.4326, 32, 8047.2363, 32, 8015.0405, 32, 7982.8447, 32, 7950.6484, 32, 7918.4526, 32, 7886.257, 32, 7854.061, 32, 7821.8647, 32, 7789.669, 32, 7757.473, 32, 7725.277, 32, 7693.081, 32, 7660.8853, 32, 7628.6895, 32, 7596.493, 32, 7564.2974, 32, 7532.1016, 32, 7499.9053, 32, 7467.7095, 32, 7435.5137, 32, 7403.3174, 32, 7371.1216, 32, 7338.926, 32, 7306.7295, 32, 7274.5337, 32, 7242.338, 32, 7210.142, 32, 7177.946, 32, 7145.75, 32, 7113.554, 32, 7081.3584, 32, 7049.162, 32, 7016.9663, 32, 6984.7705, 32, 6952.574, 32, 6920.3784, 32, 6888.1826, 32, 6855.9863, 32, 6823.7905, 32, 6791.5947, 32, 6759.3984, 32, 6727.2026, 32, 6695.007, 32, 6662.8105, 32, 6630.6147, 32, 6598.419, 32, 6566.223, 32, 6534.027, 32, 6501.831, 32, 6469.6353, 32, 6437.4395, 32, 6405.243, 32, 6373.0474, 32, 6340.8516, 32, 6308.6553, 32, 6276.4595, 32, 6244.2637, 32, 6212.0674, 32, 6179.8716, 32, 6147.676, 32, 6115.4795, 32, 6083.284, 32, 6051.088, 32, 6018.8916, 32, 5986.6963, 32, 5954.5, 32, 5922.3037, 32, 5890.1084, 32, 5857.912, 32, 5825.7163, 32, 5793.5205, 32, 5761.324, 32, 5729.1284, 32, 5696.9326, 32, 5664.7363, 32, 5632.5405, 32, 5600.3447, 32, 5568.1484, 32, 5535.953, 32, 5503.757, 32, 5471.5605, 32, 5439.365, 32, 5407.169, 32, 5374.973, 32, 5342.777, 32, 5310.581, 32, 5278.385, 32, 5246.1895, 32, 5213.993, 32, 5181.797, 32, 5149.6016, 32, 5117.4053, 32, 5085.2095, 32, 5053.0137, 32, 5020.8174, 32, 4988.6216, 32, 4956.426, 32, 4924.2295, 32, 4892.0337, 32, 4859.838, 32, 4827.6416, 32, 4795.4463, 32, 4763.25, 32, 4731.0537, 32, 4698.8584, 32, 4666.662, 32, 4634.4663, 32, 4602.2705, 32, 4570.074, 32, 4537.8784, 32, 4505.6826, 32, 4473.4863, 32, 4441.2905, 32, 4409.0947, 32, 4376.8984, 32, 4344.703, 32, 4312.507, 32, 4280.3105, 32, 4248.115, 32, 4215.919, 32, 4183.723, 32, 4151.527, 32, 4119.331, 32, 4087.1353, 32, 4054.9395, 32, 4022.7432, 32, 3990.5474, 32, 3958.3516, 32, 3926.1553, 32, 3893.9595, 32, 3861.7637, 32, 3829.5679, 32, 3797.3716, 32, 3765.1758, 32, 3732.98, 32, 3700.7837, 32, 3668.588, 32, 3636.392, 32, 3604.1963, 32, 3572, 32, 3539.4, 32, 3506.8, 32, 3474.2, 32, 3441.6, 32, 3409, 32, 3376.4, 32, 3343.8, 32, 3311.2, 32, 3278.6, 32, 3246, 32, 3213.4, 32, 3180.8, 32, 3148.2, 32, 3115.6, 32, 3083, 32, 3050.4, 32, 3017.8, 32, 2985.2, 32, 2952.6, 32, 2920, 32, 2887.4, 32, 2854.8, 32, 2822.2, 32, 2789.6, 32, 2757, 32, 2724.4, 32, 2691.8, 32, 2659.2, 32, 2626.6, 32, 2594, 32, 2561.4, 32, 2528.8, 32, 2496.2, 32, 2463.6, 32, 2431, 32, 2405, 744, 8337, 733)
metadata/_edit_lock_ = true

[node name="Edge" type="Line2D" parent="."]
texture_filter = 2
points = PackedVector2Array(8337, 32, 8304.804, 32, 8272.608, 32, 8240.412, 32, 8208.216, 32, 8176.0205, 32, 8143.824, 32, 8111.6284, 32, 8079.4326, 32, 8047.2363, 32, 8015.0405, 32, 7982.8447, 32, 7950.6484, 32, 7918.4526, 32, 7886.257, 32, 7854.061, 32, 7821.8647, 32, 7789.669, 32, 7757.473, 32, 7725.277, 32, 7693.081, 32, 7660.8853, 32, 7628.6895, 32, 7596.493, 32, 7564.2974, 32, 7532.1016, 32, 7499.9053, 32, 7467.7095, 32, 7435.5137, 32, 7403.3174, 32, 7371.1216, 32, 7338.926, 32, 7306.7295, 32, 7274.5337, 32, 7242.338, 32, 7210.142, 32, 7177.946, 32, 7145.75, 32, 7113.554, 32, 7081.3584, 32, 7049.162, 32, 7016.9663, 32, 6984.7705, 32, 6952.574, 32, 6920.3784, 32, 6888.1826, 32, 6855.9863, 32, 6823.7905, 32, 6791.5947, 32, 6759.3984, 32, 6727.2026, 32, 6695.007, 32, 6662.8105, 32, 6630.6147, 32, 6598.419, 32, 6566.223, 32, 6534.027, 32, 6501.831, 32, 6469.6353, 32, 6437.4395, 32, 6405.243, 32, 6373.0474, 32, 6340.8516, 32, 6308.6553, 32, 6276.4595, 32, 6244.2637, 32, 6212.0674, 32, 6179.8716, 32, 6147.676, 32, 6115.4795, 32, 6083.284, 32, 6051.088, 32, 6018.8916, 32, 5986.6963, 32, 5954.5, 32, 5922.3037, 32, 5890.1084, 32, 5857.912, 32, 5825.7163, 32, 5793.5205, 32, 5761.324, 32, 5729.1284, 32, 5696.9326, 32, 5664.7363, 32, 5632.5405, 32, 5600.3447, 32, 5568.1484, 32, 5535.953, 32, 5503.757, 32, 5471.5605, 32, 5439.365, 32, 5407.169, 32, 5374.973, 32, 5342.777, 32, 5310.581, 32, 5278.385, 32, 5246.1895, 32, 5213.993, 32, 5181.797, 32, 5149.6016, 32, 5117.4053, 32, 5085.2095, 32, 5053.0137, 32, 5020.8174, 32, 4988.6216, 32, 4956.426, 32, 4924.2295, 32, 4892.0337, 32, 4859.838, 32, 4827.6416, 32, 4795.4463, 32, 4763.25, 32, 4731.0537, 32, 4698.8584, 32, 4666.662, 32, 4634.4663, 32, 4602.2705, 32, 4570.074, 32, 4537.8784, 32, 4505.6826, 32, 4473.4863, 32, 4441.2905, 32, 4409.0947, 32, 4376.8984, 32, 4344.703, 32, 4312.507, 32, 4280.3105, 32, 4248.115, 32, 4215.919, 32, 4183.723, 32, 4151.527, 32, 4119.331, 32, 4087.1353, 32, 4054.9395, 32, 4022.7432, 32, 3990.5474, 32, 3958.3516, 32, 3926.1553, 32, 3893.9595, 32, 3861.7637, 32, 3829.5679, 32, 3797.3716, 32, 3765.1758, 32, 3732.98, 32, 3700.7837, 32, 3668.588, 32, 3636.392, 32, 3604.1963, 32, 3572, 32, 3539.4, 32, 3506.8, 32, 3474.2, 32, 3441.6, 32, 3409, 32, 3376.4, 32, 3343.8, 32, 3311.2, 32, 3278.6, 32, 3246, 32, 3213.4, 32, 3180.8, 32, 3148.2, 32, 3115.6, 32, 3083, 32, 3050.4, 32, 3017.8, 32, 2985.2, 32, 2952.6, 32, 2920, 32, 2887.4, 32, 2854.8, 32, 2822.2, 32, 2789.6, 32, 2757, 32, 2724.4, 32, 2691.8, 32, 2659.2, 32, 2626.6, 32, 2594, 32, 2561.4, 32, 2528.8, 32, 2496.2, 32, 2463.6, 32, 2431, 32, 2405, 744, 8337, 733)
closed = true
width = 20.0
texture = SubResource("GradientTexture2D_1idy2")
texture_mode = 1
metadata/_edit_lock_ = true

[node name="VisibleOnScreenEnabler2D" type="VisibleOnScreenEnabler2D" parent="."]

[connection signal="body_entered" from="." to="." method="handle_body"]
[connection signal="body_exited" from="." to="." method="handle_body" binds= [0.35]]
[connection signal="polygon_changed" from="Collision" to="." method="decorate_water"]
